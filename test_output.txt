Creating test database for alias 'default'...
F
======================================================================
FAIL: test_manage_page_resources (apps.core.tests.test_resource_visibility_repro.ResourceVisibilityTest.test_manage_page_resources)
Test that resources appear on the instructor builder (manage) page.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/wetende/Projects/crossview/apps/core/tests/test_resource_visibility_repro.py", line 73, in test_manage_page_resources
    self.assertIn('program', context)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
AssertionError: 'program' not found in [[{'True': True, 'False': False, 'None': None}, {'csrf_token': <SimpleLazyObject: 'ZcPYvyfjULhNnx8PtqPBsa1E34O1xbQl48joBbNd3gp6A8V8AN3dYa8vmyhUXBhz'>, 'request': <InertiaRequest: GET '/instructor/programs/1/manage/'>, 'user': <SimpleLazyObject: <User: instr@example.com>>, 'perms': PermWrapper(<SimpleLazyObject: <User: instr@example.com>>), 'messages': <FallbackStorage: request=<WSGIRequest: GET '/instructor/programs/1/manage/'>>, 'DEFAULT_MESSAGE_LEVELS': {'DEBUG': 10, 'INFO': 20, 'SUCCESS': 25, 'WARNING': 30, 'ERROR': 40}}, {}, {'inertia_layout': 'base.html', 'page': '{"component": "Instructor/Program/Manage", "props": {"csrfToken": "Qj0yLzXBcDdftQsQairC53y7dlQbcxtwVfuYRcvvl8lyGrf9hFFeB3FYwPj4CXUK", "auth": {"user": {"id": 1, "email": "instr@example.com", "firstName": "", "lastName": "", "fullName": "instr@example.com", "role": "instructor"}}, "notifications": {"unread_count": 0, "items": []}, "platform": {"institutionName": "My Institution", "tagline": "", "logoUrl": null, "faviconUrl": null, "primaryColor": "#3B82F6", "secondaryColor": "#1E40AF", "deploymentMode": "custom", "isSetupComplete": false, "features": {"certificates": true, "practicum": true, "gamification": false, "self_registration": true, "payments": false, "enrollment_mode": "instructor_approval"}}, "flash": [], "program": {"id": 1, "name": "Test Program", "code": "", "description": null, "level": "beginner", "category": null, "thumbnail": null, "whatYouLearn": [], "resources": [{"id": 1, "title": "Instructor Guide", "url": "/media/programs/resources/test_guide_qS68C1Z.pdf", "type": "material", "ext": "pdf"}], "faq": [], "notices": [], "customPricing": {}, "blueprint": null}, "curriculum": [], "courseLevels": [{"value": "beginner", "label": "Beginner"}, {"value": "intermediate", "label": "Intermediate"}, {"value": "advanced", "label": "Advanced"}]}, "url": "/instructor/programs/1/manage/", "version": "1.0", "encryptHistory": false, "clearHistory": false}'}], [{'True': True, 'False': False, 'None': None}, {'csrf_token': <SimpleLazyObject: 'ZcPYvyfjULhNnx8PtqPBsa1E34O1xbQl48joBbNd3gp6A8V8AN3dYa8vmyhUXBhz'>, 'request': <InertiaRequest: GET '/instructor/programs/1/manage/'>, 'user': <SimpleLazyObject: <User: instr@example.com>>, 'perms': PermWrapper(<SimpleLazyObject: <User: instr@example.com>>), 'messages': <FallbackStorage: request=<WSGIRequest: GET '/instructor/programs/1/manage/'>>, 'DEFAULT_MESSAGE_LEVELS': {'DEBUG': 10, 'INFO': 20, 'SUCCESS': 25, 'WARNING': 30, 'ERROR': 40}}, {}, {'inertia_layout': 'base.html', 'page': '{"component": "Instructor/Program/Manage", "props": {"csrfToken": "Qj0yLzXBcDdftQsQairC53y7dlQbcxtwVfuYRcvvl8lyGrf9hFFeB3FYwPj4CXUK", "auth": {"user": {"id": 1, "email": "instr@example.com", "firstName": "", "lastName": "", "fullName": "instr@example.com", "role": "instructor"}}, "notifications": {"unread_count": 0, "items": []}, "platform": {"institutionName": "My Institution", "tagline": "", "logoUrl": null, "faviconUrl": null, "primaryColor": "#3B82F6", "secondaryColor": "#1E40AF", "deploymentMode": "custom", "isSetupComplete": false, "features": {"certificates": true, "practicum": true, "gamification": false, "self_registration": true, "payments": false, "enrollment_mode": "instructor_approval"}}, "flash": [], "program": {"id": 1, "name": "Test Program", "code": "", "description": null, "level": "beginner", "category": null, "thumbnail": null, "whatYouLearn": [], "resources": [{"id": 1, "title": "Instructor Guide", "url": "/media/programs/resources/test_guide_qS68C1Z.pdf", "type": "material", "ext": "pdf"}], "faq": [], "notices": [], "customPricing": {}, "blueprint": null}, "curriculum": [], "courseLevels": [{"value": "beginner", "label": "Beginner"}, {"value": "intermediate", "label": "Intermediate"}, {"value": "advanced", "label": "Advanced"}]}, "url": "/instructor/programs/1/manage/", "version": "1.0", "encryptHistory": false, "clearHistory": false}'}]]

----------------------------------------------------------------------
Ran 1 test in 2.191s

FAILED (failures=1)
Destroying test database for alias 'default'...
Found 1 test(s).
System check identified no issues (0 silenced).
